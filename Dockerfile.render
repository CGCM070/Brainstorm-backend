# Usar la imagen pre-compilada desde GitHub Container Registry
FROM ghcr.io/cgcm070/brainstorm-backend:docker-startup-native

# Cambiar al directorio de trabajo correcto
WORKDIR /app

# Verificar que el binario existe y tiene permisos de ejecución
RUN ls -la /app/ && chmod +x /app/app || echo "Binario no encontrado"

# Render requiere que el puerto sea configurable
EXPOSE $PORT

# Ejecutar aplicación nativa con ruta absoluta
ENTRYPOINT ["/app/app"]
